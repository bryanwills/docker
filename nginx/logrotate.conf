# Logrotate configuration for bigbraincoding.com
/home/bryanwi09/docker/nginx/logs/bigbraincoding.com/access.log {
    daily
    missingok
    rotate 365
    compress
    delaycompress
    notifempty
    create 644 101 101
    postrotate
        # Move logs to organized structure
        YEAR=$(date +%Y)
        MONTH=$(date +%m)
        DAY=$(date +%d)

        # Create directory if it doesn't exist
        mkdir -p "/home/bryanwi09/docker/nginx/logs/bigbraincoding.com/$YEAR/$MONTH"

        # Move yesterday's log to organized structure
        if [ -f "/home/bryanwi09/docker/nginx/logs/bigbraincoding.com/access.log.1" ]; then
            mv "/home/bryanwi09/docker/nginx/logs/bigbraincoding.com/access.log.1" \
               "/home/bryanwi09/docker/nginx/logs/bigbraincoding.com/$YEAR/$MONTH/access_$DAY.log"
        fi

        # Reload nginx to reopen log files
        docker exec nginx nginx -s reload
    endscript
}

/home/bryanwi09/docker/nginx/logs/bigbraincoding.com/error.log {
    daily
    missingok
    rotate 365
    compress
    delaycompress
    notifempty
    create 644 101 101
    postrotate
        # Move logs to organized structure
        YEAR=$(date +%Y)
        MONTH=$(date +%m)
        DAY=$(date +%d)

        # Create directory if it doesn't exist
        mkdir -p "/home/bryanwi09/docker/nginx/logs/bigbraincoding.com/$YEAR/$MONTH"

        # Move yesterday's log to organized structure
        if [ -f "/home/bryanwi09/docker/nginx/logs/bigbraincoding.com/error.log.1" ]; then
            mv "/home/bryanwi09/docker/nginx/logs/bigbraincoding.com/error.log.1" \
               "/home/bryanwi09/docker/nginx/logs/bigbraincoding.com/$YEAR/$MONTH/error_$DAY.log"
        fi

        # Reload nginx to reopen log files
        docker exec nginx nginx -s reload
    endscript
}